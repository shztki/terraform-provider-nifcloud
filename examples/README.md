# terraform-provider-nifcloud
nifcloud に各種リソースを作成するためのサンプルコード

### 環境変数
```
AWS_ACCESS_KEY_ID=`ニフクラアカウントのアクセスキー`
AWS_SECRET_ACCESS_KEY=`ニフクラアカウントのシークレットアクセスキー`
TF_VAR_def_pass=`WindowsServerのパスワード`
TF_VAR_ssh_pubkey_path=`SSH公開鍵のファイルパス`
```

### コメント
* 月末に近い場合は、従量で作成後、すぐに月額に一括変更可能(charge_type)
* userdata の処理により、プライベートLAN の IPアドレスが設定された状態で作成可能(スクリプトの中身は都度修正必要)
    * グローバルIP無しにする場合は、userdata でプライベートアドレスを設定する対象NIC が 1個目になる
* ディスクはサーバー作成後に作成・アタッチされるため、自動のマウント処理がしたい場合は別途 Ansible等での対応が必要
* ファイアウォールルールは、ニフクラ仕様により同時指定できないパラメータや、設定できない値(/32の指定)などがあるので注意

### 作成状況
| リソース | ステータス |
|---|---|
| SSHキーインポート | ok |
| プライベートLAN | ok |
| サーバー | ok |
| ディスク | ok |
| ファイアウォール | 作成中... |
| ファイアウォールグループルール | 検討中... |